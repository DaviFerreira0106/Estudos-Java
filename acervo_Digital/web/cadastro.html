<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="shortcut icon" href="images/favicon.ico" type="image/x-ico">
        <link rel="stylesheet" type="text/css" href="style/style cadastro/style_mediaquery.css"/>
        <link rel="stylesheet" type="text/css" href="style/style cadastro/styleCadastro.css">
        <title>Acervo Digital / Cadastrar</title>
    </head>
    <body>
        <header>
            <h1>Cadastrar Acervo</h1>
        </header>
        <main>
            <form name="formCad" action="Servlet_Acervo" method="post" autocomplete="on" enctype="multipart/form-data">
                <div id="legenda">
                    <p>
                        <h3 id="imagem">Cadastre um novo Livro!</h3>
                        <label id="botao" for="campoImagem">Selecionar Imagem</label>
                        <input id="campoImagem" name="imagem" type="file" accept="image/png,image/jpeg" required>
                    </p> 
                </div>
                <div id="dados">
                    <p>
                        <label for="iid">Id</label>
                        <input class="campo" name="id" id="iid" type="number" required min="1">
                    </p>
                    <p>
                        <label for="ititulo">Titulo</label>
                        <input class="campo" name="titulo" id="ititulo" type="text" required maxlength="40">
                    </p>
                    <p>
                        <label for="ipreco">Preço</label>
                        <input class="campo" name="preco" id="ipreco" type="number" required min="1">
                    </p>
                    <p>
                        <label for="iautor">Autor</label>
                        <input class="campo" name="autor" id="iautor" type="text" required maxlength="30">
                    </p>
                    <p>
                        <label for="igenero">Genero</label>
                        <input class="campo" name="genero" id="igenero" type="text" required maxlength="15">
                    </p>
                    <p>
                        <label for="ieditora">Editora</label>
                        <input class="campo" name="editora" id="ieditora" type="text" required maxlength="15">
                    </p>
                    <p>
                        <label for="iidioma">Idioma</label>
                        <input class="campo" name="idioma" id="iidioma" type="text" required maxlength="10">
                    </p>
                    <p>
                        <label for="iclassificacao">Classificação Indicativa</label>
                        <input class="campo" name="classificacao" id="iclassificacao" type="text" required maxlength="8">
                    </p>
                    <p>
                        <label for="ianoPublicacao">Ano de Publicação</label>
                        <input class="campo" name="anoPublicacao" id="ianoPublicacao" type="number" required>
                    </p>
                    <p>
                        <label for="ipagina">Número de Páginas</label>
                        <input class="campo" name="pagina" id="ipagina" type="number" required>
                    </p>
                    <p>
                        <input type="submit" value="Cadastrar" id="btnCadastrar" name="btnOperacao">
                    </p>
                </div>
            </form>
        </main>
        <script>
            const image = document.querySelector('#campoImagem');
            const campo = document.querySelector('#imagem');

            image.addEventListener('change', event => {
                const preview = document.querySelector('#previewImage');
                const reader = new FileReader;

                if (preview) {
                    preview.remove();
                }

                reader.onload = function (event) {
                    const previewImage = document.createElement('img');
                    previewImage.width = 200;
                    previewImage.height = 300;
                    previewImage.id = 'previewImage';
                    previewImage.src = event.target.result;
                    campo.insertAdjacentElement('afterend', previewImage);
                }

                reader.readAsDataURL(image.files[0]);

            });
        </script>
    </body>
</html>
